"use strict",function(){var a,b,c,d,e,f,g,h;c={rgbToHsl:function(a,b,c){var d,e,f,g,h,i;a/=255,b/=255,c/=255,g=Math.max(a,b,c),h=Math.min(a,b,c),f=(g+h)/2;if(g===h)e=i=0;else{d=g-h,i=f>.5?d/(2-g-h):d/(g+h);switch(g){case a:e=(b-c)/d+(b<c?6:0);break;case b:e=(c-a)/d+2;break;case c:e=(a-b)/d+4}e/=6}return[e,i,f]},hslToRgb:function(a,b,c){var d,e,f,g,h,i;return b===0?i=e=d=c:(f=function(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},h=c<.5?c*(1+b):c+b-c*b,g=2*c-h,i=f(g,h,a+1/3),e=f(g,h,a),d=f(g,h,a-1/3)),[i*255,e*255,d*255]},rgbify:function(a){return a=a.replace(/#/,""),a.length===3?[parseInt(a.slice(0,1)+a.slice(0,1),16),parseInt(a.slice(1,2)+a.slice(1,2),16),parseInt(a.slice(2,3)+a.slice(2,3),16)]:a.length===6?[parseInt(a.slice(0,2),16),parseInt(a.slice(2,4),16),parseInt(a.slice(4,6),16)]:[0,0,0]},hexify:function(a){var b;return b="#",b+=("0"+Math.floor(a[0]).toString(16)).slice(-2),b+=("0"+Math.floor(a[1]).toString(16)).slice(-2),b+=("0"+Math.floor(a[2]).toString(16)).slice(-2),b},lighten:function(a,b){var d,e;return typeof a=="string"&&(a=c.rgbify(a)),d=c.rgbToHsl.apply(this,a),e=d[2]+d[2]*b,e=Math.min(1,e),c.hexify(c.hslToRgb(d[0],d[1],e))},darken:function(a,b){var d,e;return typeof a=="string"&&(a=c.rgbify(a)),d=c.rgbToHsl.apply(this,a),e=d[2]-d[2]*b,e=Math.max(0,d[2]),c.hexify(c.hslToRgb(d[0],d[1],e))},invert:function(a){var b,d,e;return typeof a=="string"&&(a=c.rgbify(a)),e=255-a[0],d=255-a[1],b=255-a[2],c.hexify([e,d,b])},grayscale:function(a){var b;return typeof a=="string"&&(a=c.rgbify(a)),b=c.rgbToHsl.apply(c,a)[2],c.hexify(c.hslToRgb(0,0,b))},binarize:function(a){var b;return typeof a=="string"&&(a=c.rgbify(a)),b=c.rgbToHsl.apply(c,a)[2],b>=.5?b=1:b=0,c.hexify(c.hslToRgb(0,0,b))}},g=function(){function a(a,b,c,d){this.n=a,this.s=b!=null?b:0,this.e=c!=null?c:1,d==null&&(d="linear"),Object.defineProperty(this,"fn",{get:function(){return d},set:function(a){d=a;if(typeof d=="string")return d=$.easing[d]}}),this.fn=d}return a.prototype.toArray=function(){var a,b,c,d,e,f,g;return g=[this.n,this.s,this.e,this.fn,this.e-this.s],e=g[0],f=g[1],b=g[2],c=g[3],a=g[4],function(){var b,g;g=[];for(d=b=0;0<=e?b<e:b>e;d=0<=e?++b:--b)g.push(f+c(d/e)*a);return g}()},a}(),h=function(a){var b,c;if(typeof getSelection!="undefined"&&getSelection!==null&&document.createRange!=null)return c=getSelection(),b=document.createRange(),b.selectNodeContents(a),c.removeAllRanges(),c.addRange(b);if(document.selection!=null&&document.body.createTextRange!=null)return b=document.body.createTextRange(),b.moveToElementText(a),b.select()},e={extend:function(a){var b,c,d,e,f,g,h,i;b={hue_n:6,hue_s:0,hue_e:1,hue_static:.5,hue_fn:"linear",hue_reverse:!1,saturation_n:10,saturation_s:0,saturation_e:1,saturation_static:.5,saturation_fn:"linear",saturation_reverse:!1,lightness_n:10,lightness_s:.1,lightness_e:.9,lightness_static:.5,lightness_fn:"linear",lightness_reverse:!1,pallet_mode:"HS"},a=jQuery.extend(b,a),c=["hue_s","hue_e","hue_static","saturation_s","saturation_e","saturation_static","lightness_s","lightness_e","lightness_static"],d=["hue_n","saturation_n","lightness_n"];for(f=0,h=c.length;f<h;f++)e=c[f],a[e]=parseFloat(a[e]);for(g=0,i=d.length;g<i;g++)e=d[g],a[e]=parseInt(a[e]);return a},deserialize:function(a){var b;b={};try{if(a)return b=JSON.parse(a)}finally{return e.extend(b)}},serialize:function(a){a=e.extend(a);try{return JSON.stringify(a)}catch(b){return""}}},b=function(){function a(a){var b,d,e,f,g;this.rgb=a,d=c.rgbToHsl.apply(c,this.rgb),b=Math.floor(d[0]*100)/100,f=Math.floor(d[1]*100)/100,e=Math.floor(d[2]*100)/100,this.hex=c.hexify(this.rgb),g="<span>"+this.hex+"<br><small>H: "+b+"<br>S: "+f+"<br>L: "+e+"</small></span>",this.elem=$("<li>").addClass("rhoallet-pallet-cell").css("background-color",this.hex).css("color",c.binarize(c.invert(this.rgb))).html(g),this.elem.click(function(){return h(this)})}return a}(),f=function(){function a(a,b,c){this.output=b,this.elem=$("<ul>").addClass("rhoallet-pallet"),this.elem.appendTo(a),this.configure(c)}return a.prototype.configure=function(a){var b,c,d,e;c=["hue","saturation","lightness"];for(d=0,e=c.length;d<e;d++)b=c[d],this[b]=new g(a[""+b+"_n"],a[""+b+"_s"],a[""+b+"_e"],a[""+b+"_fn"]),this[b]["static"]=a[""+b+"_static"];return this.palletMode=a.pallet_mode,this.quotation=a.quotation,this.delimiter=a.delimiter,this.opts=a,this},a.prototype.draw=function(a){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;a==null&&(a=!0);switch(this.palletMode){case"HS":h=this.hue.toArray(),m=this.saturation.toArray(),j=[this.lightness["static"]],h.newline=!0;break;case"HL":h=this.hue.toArray(),m=[this.saturation["static"]],j=this.lightness.toArray(),h.newline=!0;break;case"SL":h=[this.hue["static"]],m=this.saturation.toArray(),j=this.lightness.toArray(),m.newline=!0;break;default:throw"Unknown `pallet_mode` ("+this.palletMode+") was specified."}f=document.createDocumentFragment(),k=new Array,e=new Array,this.opts.hue_reverse&&h.reverse(),this.opts.saturation_reverse&&m.reverse(),this.opts.lightness_reverse&&j.reverse();for(n=0,q=h.length;n<q;n++){g=h[n];for(o=0,r=m.length;o<r;o++){l=m[o];for(p=0,s=j.length;p<s;p++)i=j[p],d=new b(c.hslToRgb(g,l,i)),f.appendChild(d.elem.get(0)),e.push(d.hex);m.newline!=null&&(d.elem.addClass("last"),k.push(e),e=new Array)}h.newline!=null&&(d.elem.addClass("last"),k.push(e),e=new Array)}return this.elem.empty(),this.elem[0].appendChild(f),this.colors=k,a&&this._renderOutput(k),this},a.prototype._renderOutput=function(a){var b,c,d,e,f,g,h;b="";for(e=0,g=a.length;e<g;e++){d=a[e];for(f=0,h=d.length;f<h;f++)c=d[f],c="<span style='color: "+c+"' class='color'>"+c+"</span>",c=this.quotation+c+this.quotation+this.delimiter,b+=c;b+="\n"}return this.output.html(b)},a}(),a=function(){function a(a,b){var c;a.click(function(c){return b.show(),a.hide(),$(document.body).addClass("dark")}),b.click(function(c){return b.hide(),a.show(),$(document.body).removeClass("dark")}),this.dark=a,this.light=b,c=(new Date).getHours(),c>18||c<6?a.click():b.click()}return a}(),jQuery.prototype.serializeObject==null&&(jQuery.prototype.serializeObject=function(){var a,b,c,d,e;b={},e=$(this).serializeArray();for(c=0,d=e.length;c<d;c++)a=e[c],b[a.name]=a.value;return b}),d=function(){function a(a,b,c){var d,f,g,h,i,j,k,l,m,n,o,p,q,r;this.pallet=b,this.elem=g=$("<form>").addClass("rhoallet-controller"),this.elem.appendTo(a),this._constructDOM(),d=["hue","saturation","lightness"],l=function(){return c=e.extend(g.serializeObject()),b.configure(c),b.draw()},i=function(a){return a.click(function(){return a.select()})},h=function(a,b,c,d){return a.keydown(function(b){if(b.keyCode===38)return a.increment();if(b.keyCode===40)return a.decrement()}),a.increment=function(){var c;return c=parseFloat(a.val())+b,d!=null&&d<c?a.val(d):a.val(c),a.change(),l()},a.decrement=function(){var d;return d=parseFloat(a.val())-b,c!=null&&c>d?a.val(c):a.val(d),a.change(),l()}},$("input",this.elem).each(function(){return i($(this))}),m=function(a){var b,d,e,f,g,i;return e=$("#"+a+"_n").val(c[""+a+"_n"]),h(e,1,0,99),f=$("#"+a+"_s").val(c[""+a+"_s"]),d=$("#"+a+"_e").val(c[""+a+"_e"]),h(f,.01,0,1),h(d,.01,0,1),g=$("#"+a+"_slider_dynamic").slider({min:0,max:1,step:.01,range:!0,values:[f.val(),d.val()],slide:function(a,b){return f.val(b.values[0]),d.val(b.values[1]),l()}}),f.change(function(){return g.slider("values",0,f.val())}),d.change(function(){return g.slider("values",1,d.val())}),b=$("#"+a+"_static").val(c[""+a+"_static"]),h(b,.01,0,1),i=$("#"+a+"_slider_static").slider({min:0,max:1,step:.01,value:b.val(),slide:function(a,c){return b.val(c.value),l()}}),b.change(function(){return i.slider("value",b.val())})};for(o=0,q=d.length;o<q;o++)j=d[o],m(j);f={},n=function(a){return f[""+a+"_enabled"]=$("#"+a+"_enabled"),f[""+a+"_disabled"]=$("#"+a+"_disabled")};for(p=0,r=d.length;p<r;p++)j=d[p],n(j);k=$("#pallet_mode"),k.change(function(){var a,b,c,d,e,g;switch(k.val()){case"HS":b=["hue","saturation"],a=["lightness"];break;case"HL":b=["hue","lightness"],a=["saturation"];break;case"SL":b=["saturation","lightness"],a=["hue"]}for(c=0,e=b.length;c<e;c++)j=b[c],f[""+j+"_enabled"].show(),f[""+j+"_disabled"].hide();for(d=0,g=a.length;d<g;d++)j=a[d],f[""+j+"_enabled"].hide(),f[""+j+"_disabled"].show();return l()}),k.change(),g.change(function(){return l()})}return a.prototype._constructDOM=function(){var a,b;return a={palletModes:[{name:"HS",displayName:"Hue / Saturation"},{name:"HL",displayName:"Hue / Lightness",selected:!0},{name:"SL",displayName:"Saturation / Lightness"}],palletOptionsConfigures:[{name:"hue",displayName:"Hue (H)",n:6,s:0,e:1,"static":.5,fn:"linear",reverse:!1},{name:"saturation",displayName:"Saturation (S)",n:6,s:0,e:1,"static":.5,fn:"linear",reverse:!1},{name:"lightness",displayName:"Lightness (L)",n:6,s:.1,e:.9,"static":.5,fn:"linear",reverse:!1}],outputOptionsConfigures:[{name:"quotation",displayName:"Quotation mark",value:"'"},{name:"delimiter",displayName:"Delimiter",value:", "}]},b={palletOptions:templates.palletOptions,outputOptions:templates.outputOptions,configure:templates.configure},this.elem.html(templates.controller.render(a,b))},a}(),jQuery(function(){var b,c,g,i,j;return g=e.deserialize(decodeURIComponent(location.search.substr(1))),i=$("#output pre"),i.click(function(){return h(this)}),b=new a($("#dark-mode"),$("#light-mode")),j=new f($("#pallet div"),i,g),c=new d($("#controller div"),j,g)})}.call(this)